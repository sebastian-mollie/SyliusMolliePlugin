(()=>{var e={692:()=>{$((function(){let e=!1,t=$(".online-online-payment__container");const n=$("#sylius-summary-grand-total").text(),o="online-payment__item--active",a=$("#sylius-summary-grand-total"),r=Boolean(t.data("components"));function i(){$("#bitbag-paymentFee-row").replaceWith(""),a.text(n)}$('input[id*="sylius_checkout_select_payment_"][type=radio]').on("change",(({currentTarget:e})=>{e.classList.contains("mollie-payments")||(i(),$(`.${o} input[type="radio"]`).prop("checked",!1),$(`.${o}`).removeClass(o))})),$(".online-payment__input").on("change",(({currentTarget:t})=>{let n=$(t).parent(".online-payment__item");var o;n.siblings().removeClass("online-payment__item--active"),n.addClass("online-payment__item--active"),e=t.value,$(".mollie-payments").prop("checked")||$(".mollie-payments").prop("checked",!0),n.data("feeurl")&&(o=n.data("feeurl"),fetch(o).then((e=>e.json())).then((e=>{const t=$("#bitbag-paymentFee-row");t.length&&e.view?(t.replaceWith(e.view),a.text(e.orderTotal)):e.view?($("#sylius-checkout-subtotal .ui.large.header").before(e.view),a.text(e.orderTotal)):i()})))})),t.length>0&&!0===r&&function(e){const n=t.data("environment");let o=!0;1===n&&(o=!1);const a=Mollie(t.data("profile_id"),{locale:t.data("locale"),testmode:o}),r=document.getElementsByName("sylius_checkout_select_payment")[0],i=document.getElementById("form-error"),c=document.getElementById("next-step")||document.getElementById("sylius-pay-link"),l=document.querySelector('[id*="_details_cartToken"]'),d=a.createComponent("cardHolder");d.mount("#card-holder");const s=document.getElementById("card-holder-error");d.addEventListener("change",(e=>{e.error&&e.touched?s.textContent=e.error:s.textContent=""}));const m=a.createComponent("cardNumber");m.mount("#card-number");const u=document.getElementById("card-number-error");m.addEventListener("change",(e=>{e.error&&e.touched?u.textContent=e.error:u.textContent=""}));const p=a.createComponent("expiryDate");p.mount("#expiry-date");const y=document.getElementById("expiry-date-error");p.addEventListener("change",(e=>{e.error&&e.touched?y.textContent=e.error:y.textContent=""}));const g=a.createComponent("verificationCode");g.mount("#verification-code");const h=document.getElementById("verification-code-error");function v(){c.disabled=!0}function b(){c.disabled=!1}g.addEventListener("change",(e=>{e.error&&e.touched?h.textContent=e.error:h.textContent=""})),r.addEventListener("submit",(async e=>{if("creditcard"===$(".online-payment__input:checked").val()){e.preventDefault(),v(),i.textContent="";const{token:t,error:n}=await a.createToken();if(n)return b(),i.textContent=n.message,void r.classList.remove("loading");const o=document.createElement("input");o.setAttribute("name","token"),o.setAttribute("type","hidden"),o.setAttribute("value",t),r.appendChild(o),l.value=t,r.submit()}}))}();const c=document.getElementById("applepay");c&&(window.ApplePaySession||ApplePaySession.canMakePayments())&&(c.style.display="block")}))},290:()=>{$((function(){const e=document.querySelector("#mollie_applepay_button");e&&ApplePaySession&&ApplePaySession.canMakePayments()&&(e.style.display="block"),document.querySelector("#mollie_applepay_button").addEventListener("click",(e=>{(()=>{const e=document.getElementById("mollie_applepay_button"),t=e.getAttribute("data-url-validate"),n=e.getAttribute("data-url-payment"),o=e.getAttribute("data-currency-order"),a=e.getAttribute("data-merchant-name");let r=e.getAttribute("data-total-order");r/=100,r=r.toString();const i=new ApplePaySession(3,request("US",o,a,r));i.onvalidatemerchant=e=>{jQuery.ajax({url:t,method:"POST",data:{validationUrl:e.validationURL},success:e=>{!0===e.success?i.completeMerchantValidation(JSON.parse(e.data)):i.abort()},error:(e,t,n)=>{i.abort()}})},i.onpaymentauthorized=e=>{jQuery.ajax({url:n,method:"POST",data:{token:e.payment.token,shippingContact:e.payment.shippingContact,billingContact:e.payment.billingContact},success:e=>{let t=e.data;!0===e.success?(redirectionUrl=t.returnUrl,i.completePayment(t.responseToApple),window.location.href=redirectionUrl):i.completePayment(t)},error:(e,t,n)=>{i.abort()}})},i.begin()})()}))}))}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}(()=>{"use strict";n(692),n(290)})()})();